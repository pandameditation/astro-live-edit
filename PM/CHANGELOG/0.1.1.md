# Changelog v0.1.1

**Release Date:** 2026-02-10  
**Type:** Bug Fix Release

---

## üêõ Bug Fixes

### Dynamic Content Preservation in Astro Files

**Problem:**
Dynamic Astro template expressions (e.g., `{tr("key", "lang")}`, `{visible && <p>Text</p>}`) were editable in the browser, leading to broken syntax when saved. Backend would overwrite these expressions instead of preserving them.

**Solution:**
- **Frontend:** Detects `{...}` expressions at the source line level and marks elements with `data-dynamic="true"`. These elements are non-editable (`contenteditable="false"`) with visual indicators (reduced opacity, "not-allowed" cursor, tooltip).
- **Backend:** Safety check before replacing Astro tag content‚Äîif dynamic expression detected, edit is skipped with warning log.
- **Heuristic:** Server-side scan of `.astro` files detects lines with template expressions in element content (strips HTML tags to avoid attribute false positives).

**Files Changed:**
- `src/components/SourceMap.astro` - Server-side expression detection and client injection
- `public/live-edit.js` - Non-editable styling and exclusion from change tracking
- `edit-server/save-server.js` - Backend preservation check

**Impact:**
- Dynamic Astro expressions are now protected from accidental editing
- Static content around dynamic parts remains fully editable
- No changes to Markdown/MDX editing behavior

---

## üìù Notes

- This is **Phase 1** of dynamic content handling
- Advanced features (i18n string editing, nested multi-line expressions) are planned for future releases
- Detection uses regex heuristics‚Äîsufficient for common use cases

---

**Previous Version:** 0.1.0  
**Next Planned:** 0.2.0 (TBD - Better change detection with MutationObserver)
